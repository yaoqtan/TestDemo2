<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script>
      var data=[
          {"id":"aaa","parentId":"account","spType":0,"layerId":0,"seqId":1,"name":"阿萨德发多少","deleted":"0"},
          {"id":"account","parentId":"","spType":0,"layerId":0,"seqId":50,"name":"账户","deleted":"0"},
          {"id":"qwer123","parentId":"aaa","account":0,"layerId":0,"seqId":50,"name":"账户","deleted":"0"},
          {"id":"bbb","parentId":"account","spType":0,"layerId":0,"seqId":2,"name":"阿萨德发多少","deleted":"0"},
          {"id":"ccc","parentId":"account","spType":0,"layerId":0,"seqId":3,"name":"a啊都是发","deleted":"0"},
          {"id":"ddd","parentId":"dispatch","spType":0,"layerId":0,"seqId":1,"name":"大夫","deleted":"0"},
          {"id":"dispatch","parentId":"","spType":0,"layerId":0,"seqId":2,"name":"通知公告","deleted":"0"},
          {"id":"eee","parentId":"dispatch","spType":0,"layerId":0,"seqId":2,"name":"；卡萨丁","deleted":"0"},
          {"id":"fff","parentId":"gridding","spType":0,"layerId":0,"seqId":1,"name":"拉收到了","deleted":"0"},
          {"id":"gridding","parentId":"","spType":0,"layerId":0,"seqId":1,"name":"网格化管理","deleted":"0"},
          {"id":"portals","parentId":"","spType":0,"layerId":0,"seqId":3,"name":"综合信息门户管理","deleted":"0"},
          {"id":"portals","parentId":0,"spType":0,"layerId":0,"seqId":3,"name":"综合信息门户管理","deleted":"0"},
          {"id":"portals","parentId":null,"spType":0,"layerId":0,"seqId":3,"name":"综合信息门户管理","deleted":"0"},
          {"id":"portals","spType":0,"layerId":0,"seqId":3,"name":"综合信息门户管理","deleted":"0"}
      ];
      const testdata=data.map(item=>{
          let parentId =  item.parentId ? item.parentId : 0
          return({
              ...item,
              parentId
          })
      })
      console.log(testdata)
      var getJsonTree2=function(data,parentId){
          var itemArr=[];
          for(var i=0;i<data.length;i++){
              var node=data[i];
              if(node.parentId==parentId && node.parentId){
                  var newNode={id:node.id,title:node.name,nodes:getJsonTree2(data,node.id)};
                  itemArr.push(newNode);
              }

          }
          return itemArr;
      }


      let getJsonTree=function(data,parentId){

          let itemArr=[];
          data.forEach(item=>{
              if(item.parentId===parentId){
                  let newNode={
                      ...item,
                      children:getJsonTree(data,item.id)
                  }

                  itemArr=[...itemArr,newNode]
              }
          })
          return itemArr;
      }
      console.log(getJsonTree(data,0))
      console.log(getJsonTree2(data,''));

  </script>
</head>
<body>

</body>
</html>