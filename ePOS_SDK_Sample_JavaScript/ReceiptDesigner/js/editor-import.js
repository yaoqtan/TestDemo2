var import_convert={font_font_a:"FONT_A",font_font_b:"FONT_B",font_font_c:"FONT_C",font_font_d:"FONT_D",font_font_e:"FONT_E",font_special_a:"FONT_SPECIAL_A",font_special_b:"FONT_SPECIAL_B",align_left:"ALIGN_LEFT",align_center:"ALIGN_CENTER",align_right:"ALIGN_RIGHT",color_none:"COLOR_NONE",color_color_1:"COLOR_1",color_color_2:"COLOR_2",color_color_3:"COLOR_3",color_color_4:"COLOR_4",feed_peeling:"FEED_PEELING",feed_cutting:"FEED_CUTTING",feed_current_tof:"FEED_CURRENT_TOF",feed_next_tof:"FEED_NEXT_TOF",mode_mono:"MODE_MONO",mode_gray16:"MODE_GRAY16",barcode_upc_a:"BARCODE_UPC_A",barcode_upc_e:"BARCODE_UPC_E",barcode_ean13:"BARCODE_EAN13",barcode_jan13:"BARCODE_JAN13",barcode_ean8:"BARCODE_EAN8",barcode_jan8:"BARCODE_JAN8",barcode_code39:"BARCODE_CODE39",barcode_itf:"BARCODE_ITF",barcode_codabar:"BARCODE_CODABAR",barcode_code93:"BARCODE_CODE93",barcode_code128:"BARCODE_CODE128",barcode_code128_auto:"BARCODE_CODE128_AUTO",barcode_gs1_128:"BARCODE_GS1_128",barcode_gs1_databar_omnidirectional:"BARCODE_GS1_DATABAR_OMNIDIRECTIONAL",barcode_gs1_databar_truncated:"BARCODE_GS1_DATABAR_TRUNCATED",barcode_gs1_databar_limited:"BARCODE_GS1_DATABAR_LIMITED",barcode_gs1_databar_expanded:"BARCODE_GS1_DATABAR_EXPANDED",hri_none:"HRI_NONE",hri_above:"HRI_ABOVE",hri_below:"HRI_BELOW",hri_both:"HRI_BOTH",symbol_pdf417_standard:"SYMBOL_PDF417_STANDARD",symbol_pdf417_truncated:"SYMBOL_PDF417_TRUNCATED",symbol_qrcode_model_1:"SYMBOL_QRCODE_MODEL_1",symbol_qrcode_model_2:"SYMBOL_QRCODE_MODEL_2",symbol_qrcode_micro:"SYMBOL_QRCODE_MICRO",symbol_maxicode_mode_2:"SYMBOL_MAXICODE_MODE_2",symbol_maxicode_mode_3:"SYMBOL_MAXICODE_MODE_3",symbol_maxicode_mode_4:"SYMBOL_MAXICODE_MODE_4",symbol_maxicode_mode_5:"SYMBOL_MAXICODE_MODE_5",symbol_maxicode_mode_6:"SYMBOL_MAXICODE_MODE_6",symbol_gs1_databar_stacked:"SYMBOL_GS1_DATABAR_STACKED",symbol_gs1_databar_stacked_omnidirectional:"SYMBOL_GS1_DATABAR_STACKED_OMNIDIRECTIONAL",symbol_gs1_databar_expanded_stacked:"SYMBOL_GS1_DATABAR_EXPANDED_STACKED",symbol_azteccode_fullrange:"SYMBOL_AZTECCODE_FULLRANGE",symbol_azteccode_compact:"SYMBOL_AZTECCODE_COMPACT",symbol_datamatrix_square:"SYMBOL_DATAMATRIX_SQUARE",symbol_datamatrix_rectangle_8:"SYMBOL_DATAMATRIX_RECTANGLE_8",symbol_datamatrix_rectangle_12:"SYMBOL_DATAMATRIX_RECTANGLE_12",symbol_datamatrix_rectangle_16:"SYMBOL_DATAMATRIX_RECTANGLE_16",level_level_0:"LEVEL_0",level_level_1:"LEVEL_1",level_level_2:"LEVEL_2",level_level_3:"LEVEL_3",level_level_4:"LEVEL_4",level_level_5:"LEVEL_5",level_level_6:"LEVEL_6",level_level_7:"LEVEL_7",level_level_8:"LEVEL_8",level_level_l:"LEVEL_L",level_level_m:"LEVEL_M",level_level_q:"LEVEL_Q",level_level_h:"LEVEL_H",level_default:"LEVEL_DEFAULT",line_thin:"LINE_THIN",line_medium:"LINE_MEDIUM",line_thick:"LINE_THICK",line_thin_double:"LINE_THIN_DOUBLE",line_medium_double:"LINE_MEDIUM_DOUBLE",line_thick_double:"LINE_THICK_DOUBLE",direction_left_to_right:"DIRECTION_LEFT_TO_RIGHT",direction_bottom_to_top:"DIRECTION_BOTTOM_TO_TOP",direction_right_to_left:"DIRECTION_RIGHT_TO_LEFT",direction_top_to_bottom:"DIRECTION_TOP_TO_BOTTOM",cut_no_feed:"CUT_NO_FEED",cut_feed:"CUT_FEED",cut_reserve:"CUT_RESERVE",drawer_drawer_1:"DRAWER_1",drawer_drawer_2:"DRAWER_2",pulse_pulse_100:"PULSE_100",pulse_pulse_200:"PULSE_200",pulse_pulse_300:"PULSE_300",pulse_pulse_400:"PULSE_400",pulse_pulse_500:"PULSE_500",pattern_none:"PATTERN_NONE",pattern_pattern_1:"PATTERN_1",pattern_pattern_2:"PATTERN_2",pattern_pattern_3:"PATTERN_3",pattern_pattern_4:"PATTERN_4",pattern_pattern_5:"PATTERN_5",pattern_pattern_6:"PATTERN_6",pattern_pattern_7:"PATTERN_7",pattern_pattern_8:"PATTERN_8",pattern_pattern_9:"PATTERN_9",pattern_pattern_10:"PATTERN_10",pattern_pattern_a:"PATTERN_A",pattern_pattern_b:"PATTERN_B",pattern_pattern_c:"PATTERN_C",pattern_pattern_d:"PATTERN_D",pattern_pattern_e:"PATTERN_E",pattern_error:"PATTERN_ERROR",pattern_paper_end:"PATTERN_PAPER_END",layout_receipt:"LAYOUT_RECEIPT",layout_receipt_bm:"LAYOUT_RECEIPT_BM",layout_label:"LAYOUT_LABEL",layout_label_bm:"LAYOUT_LABEL_BM",lang_ja:"ja","lang_ja-jp":"ja",lang_ko:"ko","lang_ko-kr":"ko","lang_zh-cn":"zh-cn","lang_zh-hans":"zh-hans","lang_zh-tw":"zh-tw","lang_zh-hant":"zh-hant","lang_ja-ex":"ja-ex",lang_mul:"mul"};function importDoc(){var f=new Array(),a=1,k=1,i=false,h=false,b=false,d="COLOR_1",j,c;try{j=$($.parseXML($("#import-doc").val()));if(j.find("epos-print").size()==0){throw new Error(message.import_noelem)}$("#edit-sequence li").remove();$("#edit-force").removeAttr("checked");if(/^(1|true)$/.test(j.find("epos-print").attr("force"))){$("#edit-force").attr("checked","checked")}j.find("epos-print > page-end").remove();j.find("epos-print > page").after($("<page-end/>"));c=j.find("epos-print > *, epos-print > page > *");c.each(function(o,m){var n=$(this),s=$("#edit-left ul"),u=false,t,q,e,l,r;switch(m.tagName){case"text":if(n.is("[align]")){t=s.find(".epos-text-align").clone();e=n.attr("align");q=import_convert["align_"+e];if(q){t.find(".attr-text-align").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'align="'+e+'"');break}$("#edit-sequence").append(t);extract(t)}if(n.is("[linespc]")){t=s.find(".epos-text-linespc").clone();e=n.attr("linespc");q=e|0;if(isNaN(q)||q<0||q>255){f.push("<"+m.tagName+">"+message.import_inattr+'linespc="'+e+'"');break}t.find(".attr-text-linespc").val(q);$("#edit-sequence").append(t);extract(t)}if(n.is("[rotate]")){t=s.find(".epos-text-rotate").clone();e=n.attr("rotate");if(/^(1|true)$/.test(e)){t.find(".attr-text-rotate").attr("checked","checked")}else{if(/^(0|false)$/.test(e)){t.find(".attr-text-rotate").removeAttr("checked")}else{f.push("<"+m.tagName+">"+message.import_inattr+'rotate="'+e+'"');break}}$("#edit-sequence").append(t);extract(t)}if(n.is("[lang]")){t=s.find(".epos-text-lang").clone();q=import_convert[("lang_"+n.attr("lang")).toLowerCase()];t.find(".attr-text-lang").val(q?q:"en");$("#edit-sequence").append(t);extract(t)}if(n.is("[font]")){t=s.find(".epos-text-font").clone();e=n.attr("font");q=import_convert["font_"+e];if(q){t.find(".attr-text-font").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'font="'+e+'"');break}$("#edit-sequence").append(t);extract(t)}if(n.is("[x]")){t=s.find(".epos-text-position").clone();e=n.attr("x");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'x="'+e+'"');break}t.find(".attr-text-x").val(q);$("#edit-sequence").append(t);extract(t)}if(n.is("[y]")){t=s.find(".epos-text-vposition").clone();e=n.attr("y");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'y="'+e+'"');break}t.find(".attr-text-y").val(q);$("#edit-sequence").append(t);extract(t)}if(n.is("[smooth]")){t=s.find(".epos-text-smooth").clone();e=n.attr("smooth");if(/^(1|true)$/.test(e)){t.find(".attr-text-smooth").attr("checked","checked")}else{if(/^(0|false)$/.test(e)){t.find(".attr-text-smooth").removeAttr("checked")}else{f.push("<"+m.tagName+">"+message.import_inattr+'smooth="'+e+'"');break}}$("#edit-sequence").append(t);extract(t)}if(n.is("[dw], [dh]")){t=s.find(".epos-text-double").clone();e=n.attr("dw");if(e){if(/^(1|true)$/.test(e)){a=2}else{if(/^(0|false)$/.test(e)){a=1}else{f.push("<"+m.tagName+">"+message.import_inattr+'dw="'+e+'"');break}}}e=n.attr("dh");if(e){if(/^(1|true)$/.test(e)){k=2}else{if(/^(0|false)$/.test(e)){k=1}else{f.push("<"+m.tagName+">"+message.import_inattr+'dh="'+e+'"');break}}}if(a==2){t.find(".attr-text-dw").attr("checked","checked")}else{t.find(".attr-text-dw").removeAttr("checked")}if(k==2){t.find(".attr-text-dh").attr("checked","checked")}else{t.find(".attr-text-dh").removeAttr("checked")}$("#edit-sequence").append(t);extract(t);u=a>2||k>2}if(u||n.is("[width], [height]")){t=s.find(".epos-text-size").clone();e=n.attr("width");if(e){q=e|0;if(isNaN(q)||q<1||q>8){f.push("<"+m.tagName+">"+message.import_inattr+'width="'+e+'"');break}a=q}e=n.attr("height");if(e){q=e|0;if(isNaN(q)||q<1||q>8){f.push("<"+m.tagName+">"+message.import_inattr+'height="'+e+'"');break}k=q}t.find(".attr-text-width").val(a);t.find(".attr-text-height").val(k);$("#edit-sequence").append(t);extract(t);u=false}if(n.is("[reverse], [ul], [em], [color]")){t=s.find(".epos-text-style").clone();e=n.attr("reverse");if(e){if(/^(1|true)$/.test(e)){i=true}else{if(/^(0|false)$/.test(e)){i=false}else{f.push("<"+m.tagName+">"+message.import_inattr+'reverse="'+e+'"');break}}}e=n.attr("ul");if(e){if(/^(1|true)$/.test(e)){h=true}else{if(/^(0|false)$/.test(e)){h=false}else{f.push("<"+m.tagName+">"+message.import_inattr+'ul="'+e+'"');break}}}e=n.attr("em");if(e){if(/^(1|true)$/.test(e)){b=true}else{if(/^(0|false)$/.test(e)){b=false}else{f.push("<"+m.tagName+">"+message.import_inattr+'em="'+e+'"');break}}}e=n.attr("color");if(e){q=import_convert["color_"+e];if(q){d=q}else{f.push("<"+m.tagName+">"+message.import_inattr+'color="'+e+'"');break}}if(i){t.find(".attr-text-reverse").attr("checked","checked")}else{t.find(".attr-text-reverse").removeAttr("checked")}if(h){t.find(".attr-text-ul").attr("checked","checked")}else{t.find(".attr-text-ul").removeAttr("checked")}if(b){t.find(".attr-text-em").attr("checked","checked")}else{t.find(".attr-text-em").removeAttr("checked")}t.find(".attr-text-color").val(d);$("#edit-sequence").append(t);extract(t)}if(n.text().length>0){t=s.find(".epos-text").clone();t.find(".attr-text-data").val(escapeCode(n.text()));$("#edit-sequence").append(t);extract(t)}break;case"feed":if(n.is("[linespc]")){t=s.find(".epos-text-linespc").clone();e=n.attr("linespc");q=e|0;if(isNaN(q)||q<0||q>255){f.push("<"+m.tagName+">"+message.import_inattr+'linespc="'+e+'"');break}t.find(".attr-text-linespc").val(q);$("#edit-sequence").append(t);extract(t)}if(n.is("[unit]")){t=s.find(".epos-feed-unit").clone();e=n.attr("unit");q=e|0;if(isNaN(q)||q<0||q>255){f.push("<"+m.tagName+">"+message.import_inattr+'unit="'+e+'"');break}t.find(".attr-feed-unit").val(q);$("#edit-sequence").append(t);extract(t)}if(n.is("[line]")){t=s.find(".epos-feed-line").clone();e=n.attr("line");q=e|0;if(isNaN(q)||q<0||q>255){f.push("<"+m.tagName+">"+message.import_inattr+'line="'+e+'"');break}t.find(".attr-feed-line").val(q);$("#edit-sequence").append(t);extract(t)}if(n.is(":not([unit], [line], [pos])")){t=s.find(".epos-feed").clone();$("#edit-sequence").append(t);extract(t)}if(n.is("[pos]")){t=s.find(".epos-feed-pos").clone();e=n.attr("pos");q=import_convert["feed_"+e];if(q){t.find(".attr-feed-pos").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'pos="'+e+'"');break}$("#edit-sequence").append(t);extract(t)}break;case"image":if(n.is("[align]")){t=s.find(".epos-text-align").clone();e=n.attr("align");q=import_convert["align_"+e];if(q){t.find(".attr-text-align").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'align="'+e+'"');break}$("#edit-sequence").append(t);extract(t)}if(n.is("[width][height]")){t=s.find(".epos-image").clone();e=n.attr("mode");if(e){q=import_convert["mode_"+e];if(q){t.find(".attr-image-mode").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'mode="'+e+'"');break}}e=n.attr("color");if(e){q=import_convert["color_"+e];if(q){t.find(".attr-image-color").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'color="'+e+'"');break}}l=$("#epos-image").get(0);e=n.attr("width");q=e|0;if(isNaN(q)||q<1){f.push("<"+m.tagName+">"+message.import_inattr+'width="'+e+'"');break}l.width=q;e=n.attr("height");q=e|0;if(isNaN(q)||q<1){f.push("<"+m.tagName+">"+message.import_inattr+'height="'+e+'"');break}l.height=q;r=decodeBase64(n.text());if(n.attr("mode")=="gray16"){if(r.length==((l.width+1)>>1)*l.height){drawGray16(l,r)}else{f.push("<"+m.tagName+">"+message.import_intext);break}}else{if(r.length==((l.width+7)>>3)*l.height){drawMono(l,r)}else{f.push("<"+m.tagName+">"+message.import_intext);break}}t.find(".attr-image").attr({src:l.toDataURL()});t.find(".attr-image-file").val("");$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"width", "height"')}break;case"logo":if(n.is("[align]")){t=s.find(".epos-text-align").clone();e=n.attr("align");q=import_convert["align_"+e];if(q){t.find(".attr-text-align").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'align="'+e+'"');break}$("#edit-sequence").append(t);extract(t)}if(n.is("[key1][key2]")){t=s.find(".epos-logo").clone();e=n.attr("key1");q=e|0;if(isNaN(q)||q<32||q>126){f.push("<"+m.tagName+">"+message.import_inattr+'key1="'+e+'"');break}t.find(".attr-logo-key1").val(q);e=n.attr("key2");q=e|0;if(isNaN(q)||q<32||q>126){f.push("<"+m.tagName+">"+message.import_inattr+'key2="'+e+'"');break}t.find(".attr-logo-key2").val(q);$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"key1", "key2"')}break;case"barcode":if(n.is("[align]")){t=s.find(".epos-text-align").clone();e=n.attr("align");q=import_convert["align_"+e];if(q){t.find(".attr-text-align").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'align="'+e+'"');break}$("#edit-sequence").append(t);extract(t)}if(n.is("[rotate]")){t=s.find(".epos-text-rotate").clone();e=n.attr("rotate");if(/^(1|true)$/.test(e)){t.find(".attr-text-rotate").attr("checked","checked")}else{if(/^(0|false)$/.test(e)){t.find(".attr-text-rotate").removeAttr("checked")}else{f.push("<"+m.tagName+">"+message.import_inattr+'rotate="'+e+'"');break}}$("#edit-sequence").append(t);extract(t)}if(n.is("[type]")){t=s.find(".epos-barcode").clone();e=n.attr("type");q=import_convert["barcode_"+e];if(q){t.find(".attr-barcode-type").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'type="'+e+'"');break}e=n.attr("hri");if(e){q=import_convert["hri_"+e];if(q){t.find(".attr-barcode-hri").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'hri="'+e+'"');break}}e=n.attr("font");if(e){q=import_convert["font_"+e];if(q){t.find(".attr-barcode-font").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'font="'+e+'"');break}}e=n.attr("width");if(e){q=e|0;if(isNaN(q)||q<2||q>6){f.push("<"+m.tagName+">"+message.import_inattr+'width="'+e+'"');break}t.find(".attr-barcode-width").val(q)}e=n.attr("height");if(e){q=e|0;if(isNaN(q)||q<1||q>255){f.push("<"+m.tagName+">"+message.import_inattr+'height="'+e+'"');break}t.find(".attr-barcode-height").val(q)}t.find(".attr-barcode-data").val(escapeCode(n.text()));$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"type"')}break;case"symbol":if(n.is("[align]")){t=s.find(".epos-text-align").clone();e=n.attr("align");q=import_convert["align_"+e];if(q){t.find(".attr-text-align").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'align="'+e+'"');break}$("#edit-sequence").append(t);extract(t)}if(n.is("[rotate]")){t=s.find(".epos-text-rotate").clone();e=n.attr("rotate");if(/^(1|true)$/.test(e)){t.find(".attr-text-rotate").attr("checked","checked")}else{if(/^(0|false)$/.test(e)){t.find(".attr-text-rotate").removeAttr("checked")}else{f.push("<"+m.tagName+">"+message.import_inattr+'rotate="'+e+'"');break}}$("#edit-sequence").append(t);extract(t)}if(n.is("[type]")){t=s.find(".epos-symbol").clone();e=n.attr("type");q=import_convert["symbol_"+e];if(q){t.find(".attr-symbol-type").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'type="'+e+'"');break}e=n.attr("level");if(e){q=import_convert["level_"+e];if(q){t.find(".attr-symbol-level-enum").val(q)}else{q=e|0;if(isNaN(q)||q<5||q>95){f.push("<"+m.tagName+">"+message.import_inattr+'level="'+e+'"');break}t.find(".attr-symbol-level").val(q)}}e=n.attr("width");if(e){q=e|0;if(isNaN(q)||q<0||q>16){f.push("<"+m.tagName+">"+message.import_inattr+'width="'+e+'"');break}t.find(".attr-symbol-width").val(q)}e=n.attr("height");if(e){q=e|0;if(isNaN(q)||q<0||q>8){f.push("<"+m.tagName+">"+message.import_inattr+'height="'+e+'"');break}t.find(".attr-symbol-height").val(q)}e=n.attr("size");if(e){q=e|0;if(isNaN(q)||q<0||q>2400){f.push("<"+m.tagName+">"+message.import_inattr+'size="'+e+'"');break}t.find(".attr-symbol-size").val(q)}t.find(".attr-symbol-data").val(escapeCode(n.text()));$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"type"')}break;case"hline":if(n.is("[x1][x2]")){t=s.find(".epos-hline").clone();e=n.attr("x1");q=e|0;if(isNaN(q)||q<0||q>575){f.push("<"+m.tagName+">"+message.import_inattr+'x1="'+e+'"');break}t.find(".attr-hline-x1").val(q);e=n.attr("x2");q=e|0;if(isNaN(q)||q<0||q>575){f.push("<"+m.tagName+">"+message.import_inattr+'x2="'+e+'"');break}t.find(".attr-hline-x2").val(q);e=n.attr("style");if(e){q=import_convert["line_"+e];if(q){t.find(".attr-hline-style").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'style="'+e+'"');break}}$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"x1", "x2"')}break;case"vline-begin":if(n.is("[x]")){t=s.find(".epos-vline-begin").clone();e=n.attr("x");q=e|0;if(isNaN(q)||q<0||q>575){f.push("<"+m.tagName+">"+message.import_inattr+'x="'+e+'"');break}t.find(".attr-vline-x").val(q);e=n.attr("style");if(e){q=import_convert["line_"+e];if(q){t.find(".attr-vline-style").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'style="'+e+'"');break}}$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"x"')}break;case"vline-end":if(n.is("[x]")){t=s.find(".epos-vline-end").clone();e=n.attr("x");q=e|0;if(isNaN(q)||q<0||q>575){f.push("<"+m.tagName+">"+message.import_inattr+'x="'+e+'"');break}t.find(".attr-vline-x").val(q);e=n.attr("style");if(e){q=import_convert["line_"+e];if(q){t.find(".attr-vline-style").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'style="'+e+'"');break}}$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"x"')}break;case"page":t=s.find(".epos-page-begin").clone();$("#edit-sequence").append(t);extract(t);break;case"area":if(n.is("[x][y][width][height]")){t=s.find(".epos-area").clone();e=n.attr("x");q=e|0;if(isNaN(q)||q<0||q>575){f.push("<"+m.tagName+">"+message.import_inattr+'x="'+e+'"');break}t.find(".attr-area-x").val(q);e=n.attr("y");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'y="'+e+'"');break}t.find(".attr-area-y").val(q);e=n.attr("width");q=e|0;if(isNaN(q)||q<1||q>576){f.push("<"+m.tagName+">"+message.import_inattr+'width="'+e+'"');break}t.find(".attr-area-width").val(q);e=n.attr("height");q=e|0;if(isNaN(q)||q<1||q>2400){f.push("<"+m.tagName+">"+message.import_inattr+'height="'+e+'"');break}t.find(".attr-area-height").val(q);$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"x", "y", "width", "height"')}break;case"direction":if(n.is("[dir]")){t=s.find(".epos-direction").clone();e=n.attr("dir");q=import_convert["direction_"+e];if(q){t.find(".attr-direction-dir").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'dir="'+e+'"');break}$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"dir"')}break;case"position":if(n.is("[x][y]")){t=s.find(".epos-position").clone();e=n.attr("x");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'x="'+e+'"');break}t.find(".attr-position-x").val(q);e=n.attr("y");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'y="'+e+'"');break}t.find(".attr-position-y").val(q);$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"x", "y"')}break;case"line":if(n.is("[x1][y1][x2][y2]")){t=s.find(".epos-line").clone();e=n.attr("x1");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'x1="'+e+'"');break}t.find(".attr-line-x1").val(q);e=n.attr("y1");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'y1="'+e+'"');break}t.find(".attr-line-y1").val(q);e=n.attr("x2");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'x2="'+e+'"');break}t.find(".attr-line-x2").val(q);e=n.attr("y2");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'y2="'+e+'"');break}t.find(".attr-line-y2").val(q);e=n.attr("style");if(e){q=import_convert["line_"+e];if(q){t.find(".attr-line-style").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'style="'+e+'"');break}}$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"x1", "y1", "x2", "y2"')}break;case"rectangle":if(n.is("[x1][y1][x2][y2]")){t=s.find(".epos-rectangle").clone();e=n.attr("x1");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'x1="'+e+'"');break}t.find(".attr-rectangle-x1").val(q);e=n.attr("y1");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'y1="'+e+'"');break}t.find(".attr-rectangle-y1").val(q);e=n.attr("x2");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'x2="'+e+'"');break}t.find(".attr-rectangle-x2").val(q);e=n.attr("y2");q=e|0;if(isNaN(q)||q<0||q>2399){f.push("<"+m.tagName+">"+message.import_inattr+'y2="'+e+'"');break}t.find(".attr-rectangle-y2").val(q);e=n.attr("style");if(e){q=import_convert["line_"+e];if(q){t.find(".attr-rectangle-style").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'style="'+e+'"');break}}$("#edit-sequence").append(t);extract(t)}else{f.push("<"+m.tagName+">"+message.import_noattr+'"x1", "y1", "x2", "y2"')}break;case"page-end":t=s.find(".epos-page-end").clone();$("#edit-sequence").append(t);extract(t);break;case"cut":t=s.find(".epos-cut").clone();e=n.attr("type");if(e){q=import_convert["cut_"+e];if(q){t.find(".attr-cut-type").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'type="'+e+'"');break}}$("#edit-sequence").append(t);extract(t);break;case"pulse":t=s.find(".epos-pulse").clone();e=n.attr("drawer");if(e){q=import_convert["drawer_"+e];if(q){t.find(".attr-pulse-drawer").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'drawer="'+e+'"');break}}e=n.attr("time");if(e){q=import_convert["pulse_"+e];if(q){t.find(".attr-pulse-time").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'time="'+e+'"');break}}$("#edit-sequence").append(t);extract(t);break;case"sound":t=s.find(".epos-sound").clone();e=n.attr("pattern");if(e){q=import_convert["pattern_"+e];if(q){t.find(".attr-sound-pattern").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'pattern="'+e+'"');break}}e=n.attr("repeat");if(e){q=e|0;if(isNaN(q)||q<0||q>255){f.push("<"+m.tagName+">"+message.import_inattr+'repeat="'+e+'"');break}t.find(".attr-sound-repeat").val(q)}e=n.attr("cycle");if(e){q=e|0;if(isNaN(q)||q<1000||q>25500){f.push("<"+m.tagName+">"+message.import_inattr+'cycle="'+e+'"');break}t.find(".attr-sound-cycle").val(q)}$("#edit-sequence").append(t);extract(t);break;case"layout":t=s.find(".epos-layout").clone();e=n.attr("type");q=import_convert["layout_"+e];if(q){t.find(".attr-layout-type").val(q)}else{f.push("<"+m.tagName+">"+message.import_inattr+'type="'+e+'"');break}e=n.attr("width");if(e){q=(e|0)/10;if(isNaN(q)||q<29||q>80){f.push("<"+m.tagName+">"+message.import_inattr+'width="'+e+'"');break}t.find(".attr-layout-width").val(q)}e=n.attr("height");if(e){q=(e|0)/10;if(isNaN(q)||(q!=0&&q<28.4)||q>310){f.push("<"+m.tagName+">"+message.import_inattr+'height="'+e+'"');break}if(q!==0){t.find(".attr-layout-height-auto:first").removeAttr("checked");t.find(".attr-layout-height-auto:last").attr("checked","checked");t.find(".attr-layout-height").val(q)}}e=n.attr("margin-top");if(e){q=(e|0)/10;if(isNaN(q)||q<-15||q>300){f.push("<"+m.tagName+">"+message.import_inattr+'margin-top="'+e+'"');break}t.find(".attr-layout-margin-top").val(q)}e=n.attr("margin-bottom");if(e){q=(e|0)/10;if(isNaN(q)||q<-1.5||q>1.5){f.push("<"+m.tagName+">"+message.import_inattr+'margin-bottom="'+e+'"');break}t.find(".attr-layout-margin-bottom").val(q)}e=n.attr("offset-cut");if(e){q=(e|0)/10;if(isNaN(q)||q<-29||q>5){f.push("<"+m.tagName+">"+message.import_inattr+'offset-cut="'+e+'"');break}t.find(".attr-layout-offset-cut").val(q)}e=n.attr("offset-label");if(e){q=(e|0)/10;if(isNaN(q)||q<0||q>1.5){f.push("<"+m.tagName+">"+message.import_inattr+'offset-label="'+e+'"');break}t.find(".attr-layout-offset-label").val(q)}$("#edit-sequence").append(t);extract(t);break;case"recovery":t=s.find(".epos-recovery").clone();$("#edit-sequence").append(t);extract(t);break;case"reset":t=s.find(".epos-reset").clone();$("#edit-sequence").append(t);extract(t);break;case"command":t=s.find(".epos-command").clone();t.find(".attr-command-data").val(decodeHex(n.text()));$("#edit-sequence").append(t);extract(t);break;case"rotate-begin":t=s.find(".epos-rotate-begin").clone();t.find(".attr-command-data").val(decodeHex(n.text()));$("#edit-sequence").append(t);extract(t);break;case"rotate-end":t=s.find(".epos-rotate-end").clone();t.find(".attr-command-data").val(decodeHex(n.text()));$("#edit-sequence").append(t);extract(t);break;default:f.push("<"+m.tagName+">"+message.import_inelem);break}});if(f.length>0){f.push("")}f.push(message.import_complete)}catch(g){f.push(g.message);f.push("");f.push(message.import_abort)}f.push("");$("#import-info").val(f.join("\n")).change()}function escapeCode(a){var b=/[\t\n\r\\]/g;if(b.test(a)){a=a.replace(b,function(e){var d="";switch(e){case"\t":d="\\t";break;case"\n":d="\\n";break;case"\r":d="\\r";break;case"\\":d="\\\\";break;default:break}return d})}return a}function decodeHex(a){var b=/[0-9A-Fa-f]{2}/g;a=a.replace(/[^0-9A-Fa-f]/g,"");a=a.slice(0,a.length&~1);if(b.test(a)){a=a.replace(b,function(d){return"\\x"+d})}return a}function decodeBase64(k){var f=String.fromCharCode,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g={},c,a,b,e,d;for(d=0;d<64;d++){g[h.charAt(d)]=d}k=k.replace(/[^A-Za-z0-9\+\/]/g,"");c=k.length;a=new Array((c+3>>2)*3);k+="AAA";d=0;e=0;while(e<c){b=g[k.charAt(e++)]<<18|g[k.charAt(e++)]<<12|g[k.charAt(e++)]<<6|g[k.charAt(e++)];a[d++]=f(b>>16&255);a[d++]=f(b>>8&255);a[d++]=f(b&255)}a.length-=(4-c%4)%4;return a.join("")}function drawMono(b,k){var a,n,h,e,m,g=0,f=0;if(b.getContext){a=b.getContext("2d");n=a.getImageData(0,0,(b.width+7)&~7,b.height);h=n.data;e=h.length>>2;while(g<e){m=(k.charCodeAt(g>>3)&(128>>(g&7)))==0?255:0;h[f++]=m;h[f++]=m;h[f++]=m;h[f++]=255;g++}a.putImageData(n,0,0)}}function drawGray16(b,m){var h=[0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,6,7,7,7,7,8,8,8,8,8,9,9,9,9,10,10,10,10,10,11,12,12,13,13,14,15,15,16,16,17,17,18,19,19,20,20,21,22,24,25,26,27,28,29,30,31,32,33,34,35,37,38,39,40,42,44,45,47,48,50,52,53,55,56,58,60,61,63,64,66,68,70,72,74,77,79,81,83,85,87,89,91,93,95,97,99,102,104,106,109,111,114,116,118,121,123,126,128,130,133,135,138,140,142,145,147,150,152,155,157,160,162,165,167,170,172,175,177,180,182,185,187,189,191,193,195,198,200,202,204,206,209,211,213,215,217,220,222,223,225,226,228,229,231,232,234,235,237,238,240,241,243,244,246,247,248,248,248,249,249,250,250,251,251,252,252,253,253,254,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],a,o,k,e,n,g=0,f=0;if(b.getContext){a=b.getContext("2d");o=a.getImageData(0,0,(b.width+1)&~1,b.height);k=o.data;e=k.length>>1;while(g<e){n=h[(m.charCodeAt(g>>1)&240)+8];k[f++]=n;k[f++]=n;k[f++]=n;k[f++]=255;g++;n=h[((m.charCodeAt(g>>1)&15)<<4)+8];k[f++]=n;k[f++]=n;k[f++]=n;k[f++]=255;g++}a.putImageData(o,0,0)}};