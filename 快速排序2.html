<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
     <script>
       function quickSort(arr, left, right) {
         var len = arr.length,
           partitionIndex,
           left = typeof left != 'number' ? 0 : left,
           right = typeof right != 'number' ? len - 1 : right;

         if (left < right) {
           partitionIndex = partition(arr, left, right);
           quickSort(arr, left, partitionIndex-1);
           quickSort(arr, partitionIndex+1, right);
         }
         return arr;
       }

       function partition(arr, left ,right) {     // 分区操作
         console.log(`arr:${arr},left:${left},right:${right}`)
         var pivot = left,                      // 设定基准值（pivot）
           index = pivot + 1;
         for (var i = index; i <= right; i++) {
           if (arr[i] < arr[pivot]) {
             swap(arr, i, index);
             index++;
           }
         }
         swap(arr, pivot, index - 1);
         return index-1;
       }

       function swap(arr, i, j) {
         var temp = arr[i];
         arr[i] = arr[j];
         arr[j] = temp;
       }

       console.log(quickSort([3, 5, 1, 6, 4, 7, 2]))
     </script>

   <script>
       //简单易懂的快速排序
       //快排基本步骤：
       //1.选取基准元素
       //2.比基准元素小的元素放到左边，大的放右边
       //3.在左右子数组中重复步骤一二，直到数组只剩下一个元素4.向上逐级合并数组

       const  array = [3, 5, 1, 6, 4, 7, 2];//[3,5,1,4,2]

       function quickSort(array){
           if(array.length<=1) return array // 递归终止条件
           const pivot = Math.floor(array.length/2) //基准点
           const pivotValue = array.splice(pivot,1)
           const leftArr=[]
           const rightArr=[]
           for(let i=0;i<array.length;i++){
               if(array[i]>pivotValue){
                   rightArr.push(array[i])
               }else{
                   leftArr.push(array[i])
               }
           }
           return [...quickSort(leftArr),...pivotValue,...quickSort(rightArr)]
       }
       console.log(quickSort(array))


       //优化版快速排序,但不是最优化，只是把切割数组改成下标置换


       //这个left和right代表分区后“新数组”的区间下标，因为这里没有新开数组，所以需要left/right来确认新数组的位置
       function quickSort1(arr,left,right){
           if(left<right){
               let pos = left -1;//pos即“被置换的位置”，第一趟为-1
                for(let i=left;i<=right;i++){//循环遍历数组，置换元素
                    let pivot = arr[right] //选取数组最后一位作为基准数，
                    if(arr[i]<=pivot){ //若小于等于基准数，pos++，并置换元素, 这里使用小于等于而不是小于, 其实是为了避免因为重复数据而进入死循环
                        pos++
                        let temp = arr[pos]
                        arr[pos] = arr[i]
                        arr[i] = temp
                    }
                }
               //一趟排序完成后，pos位置即基准数的位置，以pos的位置分割数组
               quickSort1(arr,left,pos-1)
               quickSort1(arr,pos+1,right)
           }
           return arr
       }
       let  array1 = [3, 5, 1, 6, 4, 7, 2,9,23];//[3,5,1,4,2]
       let start = 0;
       let end= array1.length-1;
       console.log(quickSort1(array1,start,end))

   </script>


  <script>
      // function quickSort(arr, left, right) {          //这个left和right代表分区后“新数组”的区间下标，因为这里没有新开数组，所以需要left/right来确认新数组的位置
      //     if (left < right) {
      //         let pos = left - 1                      //pos即“被置换的位置”，第一趟为-1
      //         for(let i = left; i <= right; i++) {    //循环遍历数组，置换元素
      //             let pivot = arr[right]              //选取数组最后一位作为基准数，
      //             if(arr[i] <= pivot) {               //若小于等于基准数，pos++，并置换元素, 这里使用小于等于而不是小于, 其实是为了避免因为重复数据而进入死循环
      //                 pos++
      //                 let temp = arr[pos]
      //                 arr[pos] = arr[i]
      //                 arr[i] = temp
      //             }
      //         }
      //         //一趟排序完成后，pos位置即基准数的位置，以pos的位置分割数组
      //         quickSort(arr, left, pos - 1)
      //         quickSort(arr, pos + 1, right)
      //     }
      //     return arr      //数组只包含1或0个元素时(即left>=right)，递归终止
      // }
      //
      // //使用
      // var arr = [5,1,4,2,3]
      // var start = 0;
      // var end = arr.length - 1;
      // quickSort(arr, start, end)
  </script>

</head>
<body>

</body>
</html>